
CREATE TABLE `scientific_fields` (
    `id` int(11) not null auto_increment,
    `description` varchar(255) not null,
    primary key (`id`)
);

CREATE TABLE `programmes` (
    `id` int(11) not null auto_increment,
    `name` varchar(255) not null,
    `name_of_directorate` varchar(255) not null,
     primary key (`id`)
);

CREATE TABLE `directorates`(
    `id` int(11) not null auto_increment,
    `name` varchar(255) not null,
    `name_of_directorate` varchar(255) not null,
     primary key (`id`)
);

CREATE TABLE `executives`(
     `id` int(11) not null auto_increment,
     `name` varchar(255) not null,
     `surname` varchar(255) not null,
     `tax_identification_number` varchar(255) not null unique,


     primary key (`id`)



);

CREATE TABLE `categories_of_organisations`(
     `id` int(11) not null auto_increment,
     `name` varchar(255) not null,


     primary key (`id`)



);


CREATE TABLE `organizations`(
     `id` int(11) not null auto_increment,
     `name` varchar(255) not null,
     `abbrevation` varchar(15) not null,
     `city` varchar(255) not null,
     `street_name` varchar(255) not null,
     `street_number`varchar(255) not null,
     `postal_code` int(5) not null,
     `category_id` int(11) not null,

     primary key (`id`),
      foreign key (`category_id`) references categories_of_organisations(`id`)



);

CREATE TABLE `researchers`(
     `id` int(11) not null auto_increment,
     `name` varchar(255) not null,
     `surname` varchar(15) not null,
     `sex` varchar(255) not null,
     `date_of_birth` date null default null,
     `start_date_work` date null default null,
     `organization_works_id` int(11) not null,

     primary key (`id`),
     foreign key (`organization_works_id`) references organizations(`id`)



);

CREATE TABLE `projects` (
	`id` INT(11) NOT NULL AUTO_INCREMENT,
	`title` VARCHAR(255) NOT NULL COLLATE 'utf8mb4_general_ci',
	`summery` VARCHAR(255) NULL DEFAULT NULL COLLATE 'utf8mb4_general_ci',
	`amount_of_fund` DECIMAL(10,4) NOT NULL CHECK(amount_of_fund BETWEEN 100000 AND 100000000),
	`duration` INT(1) NOT NULL CHECK(duration BETWEEN 1 AND 4),
	`start_date` DATE NULL DEFAULT NULL,
	`expiry_date` DATE NULL DEFAULT NULL,
	`responsible_researcher_id` int(11) not null,
	`manager_organization_id` int(11) not null,
	`funding_programme_id` int(11) not null,
	PRIMARY KEY (`id`),
    FOREIGN KEY (`responsible_researcher_id`) REFERENCES `researchers` (`id`) ON DELETE CASCADE,
    FOREIGN KEY (`manager_organization_id`) REFERENCES `organizations` (`id`) ON DELETE CASCADE,
    FOREIGN KEY (`funding_programme_id`) REFERENCES `programmes` (`id`) ON DELETE CASCADE

);

create table `organization_phone_number`(
    `id` int(11) not null auto_increment,
     `organization_id` int(11) not null unique,
     `number` int(15) not null unique,

     primary key (`id`),

     foreign key (`organization_id`) references organizations(`id`) on delete cascade
);
create table `researcher_on_project`(
     `id` int(11) not null auto_increment,
     `project_id` int(11) not null unique,
     `researcher_id` int(11) not null,

     primary key (`id`),

     foreign key (`project_id`) references projects(`id`) on delete cascade,
     foreign key (`researcher_id`) references researchers(`id`) on delete cascade


);


create table `project_assessment` (
     `id` int(11) not null auto_increment,
     `project_id` int(11) not null unique,
     `researcher_id` int(11) not null,
     `grade` int(3) not null default 0,
     `date`  date not null DEFAULT   CURRENT_TIMESTAMP,

     primary key (`id`),

     foreign key (`project_id`) references projects(`id`) on delete cascade,
     foreign key (`researcher_id`) references researchers(`id`) on delete cascade
);

create table `project_scientific_fields`(
     `id` int(11) not null auto_increment,
     `project_id` int(11) not null,
     `scientific_field_id` int(11) not null,


     primary key (`id`),

     foreign key (`project_id`) references projects(`id`) on delete cascade,
     foreign key (`scientific_field_id`) references scientific_fields(`id`) on delete cascade

);

CREATE TABLE `deliverables`(
    `id` int(11) not null auto_increment,
    `project_id` int(11) not null,
    `title` varchar(255) not null,
    `summery` varchar(255) not null,
    `date_of_delivery` DATE NULL DEFAULT NULL,
     primary key (`id`),
     foreign key (`project_id`) REFERENCES projects(`id`) ON DELETE CASCADE
);



CREATE TABLE `executive_to_project`(
    `id` int(11) not null auto_increment,
    `executive_id` int(11) not null,
    `project_id` int(11) not null unique ,

    primary key (`id`),
    foreign key (`executive_id`) references executives(`id`) on delete cascade ,
    foreign key (`project_id`) references projects(`id`) on delete cascade

);